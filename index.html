<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hannie's Tech Hub V9 - Perfect Alignment</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --pony-pink: #ff69b4;
            --pony-soft: #fff0f6;
            --pony-deep: #ff85a1;
            --glass-white: rgba(255, 255, 255, 0.95);
        }

        body {
            font-family: 'PingFang SC', sans-serif;
            margin: 0;
            background: var(--pony-soft);
            color: #4a4a4a;
            overflow-x: hidden;
        }

        /* --- é¦–é¡µ --- */
        nav {
            background: white;
            padding: 15px 10%;
            display: flex;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(255, 133, 161, 0.1);
        }

        .logo {
            font-weight: bold;
            color: var(--pony-deep);
            font-size: 1.4rem;
        }

        .container {
            max-width: 1100px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .profile-card {
            background: white;
            border-radius: 30px;
            padding: 40px;
            display: flex;
            align-items: center;
            gap: 40px;
            box-shadow: 0 20px 40px rgba(255, 133, 161, 0.1);
            margin-bottom: 50px;
        }

        .avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 5px solid var(--pony-soft);
        }

        .section-title {
            color: var(--pony-deep);
            text-align: center;
            margin: 40px 0 20px;
            font-size: 1.4rem;
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }

        .tech-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
            border-bottom: 4px solid transparent;
        }

        .tech-card:hover {
            border-bottom-color: var(--pony-pink);
            transform: translateY(-5px);
        }

        .gallery {
            column-count: 4;
            column-gap: 15px;
            margin-top: 20px;
        }

        .gallery-item {
            break-inside: avoid;
            margin-bottom: 15px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .gallery-item img {
            width: 100%;
            display: block;
        }

        footer {
            background: white;
            padding: 30px;
            text-align: center;
            color: #999;
            font-size: 0.85rem;
            margin-top: 50px;
        }

        /* --- ä¸“æ³¨é¡µæ ¸å¿ƒå¯¹é½é€»è¾‘ --- */
        #focus-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffe4e1 0%, #fff0f5 100%);
            z-index: 1000;
            overflow-y: auto;
        }

        .focus-header {
            background: var(--pony-pink);
            color: white;
            padding: 10px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .focus-layout {
            max-width: 1300px;
            margin: 20px auto;
            display: grid;
            grid-template-columns: 0.8fr 1fr 1.5fr;
            gap: 20px;
            padding: 0 20px;
            align-items: stretch;
            /* å…³é”®ï¼šå¼ºåˆ¶æ‰€æœ‰åˆ—ç­‰é«˜ */
        }

        /* å·¦ä¾§ï¼šç•ªèŒ„é’Ÿå¡ç‰‡ */
        .glass-card-timer {
            background: var(--glass-white);
            border-radius: 35px;
            padding: 40px 20px;
            border: 2px solid white;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .timer-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: 8px solid #ffb6c1;
            margin-bottom: 20px;
            overflow: hidden;
            background: white;
        }

        .timer-circle img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #timer-display {
            font-size: 4rem;
            font-weight: bold;
            color: var(--pony-pink);
            margin: 0;
            cursor: pointer;
        }

        /* ä¸­é—´ï¼šæ¿å—é€‰æ‹© + é¥¼å›¾ */
        .center-column {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .sector-btns-box {
            display: flex;
            flex-direction: column;
            gap: 8px;
            background: var(--glass-white);
            padding: 15px;
            border-radius: 25px;
            border: 2px solid white;
        }

        .sector-btn {
            padding: 10px;
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            font-size: 0.85rem;
        }

        .sector-btn.active {
            outline: 4px solid var(--pony-pink);
            transform: scale(1.02);
        }

        .pie-container {
            background: var(--glass-white);
            border-radius: 25px;
            padding: 20px;
            border: 2px solid white;
            flex-grow: 1;
            /* å…³é”®ï¼šè‡ªåŠ¨æ’‘å¼€ */
            display: flex;
            flex-direction: column;
        }

        /* å³ä¾§ï¼šæ•°æ®ä¸è¶‹åŠ¿ */
        .data-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .action-area {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn-main {
            background: white;
            border: 3px solid var(--pony-pink);
            border-radius: 20px;
            padding: 15px;
            cursor: pointer;
            color: var(--pony-pink);
            font-weight: bold;
            font-size: 1.1rem;
        }

        .btn-main.running {
            background: #ffecf2;
            border-style: dashed;
        }

        .btn-link {
            background: var(--pony-deep);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 12px;
            cursor: pointer;
            font-weight: bold;
        }

        .stat-card-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .small-stat {
            background: white;
            padding: 15px;
            border-radius: 20px;
            text-align: center;
            border: 1px solid #fff;
        }

        /* è¶‹åŠ¿è¡¨ä¿®æ­£ï¼šå»æ‰å›ºå®šé«˜åº¦ï¼Œä½¿ç”¨ flex-grow 1 ç¡®ä¿ä¸å·¦è¾¹åº•éƒ¨å¯¹é½ */
        .line-chart-box {
            background: white;
            padding: 20px;
            border-radius: 25px;
            flex-grow: 1;
            /* å…³é”®ï¼šè®©å®ƒæ’‘æ»¡å‰©ä½™é«˜åº¦ï¼Œå®ç°åº•éƒ¨å¯¹é½ */
            display: flex;
            flex-direction: column;
            min-height: 250px;
        }
    </style>
</head>

<body>

    <div id="home-page">
        <nav>
            <div class="logo">ğŸ¦„ HANNIE LEARNING HUB</div>
        </nav>
        <div class="container">
            <div class="profile-card">
                <img src="./å›¾ç‰‡/å¤´åƒ.png" class="avatar">
                <div>
                    <h1 style="color: var(--pony-deep); margin: 0;">Hannie</h1>
                    <p>æ­£åœ¨å­¦ä¹ å‰ç«¯å¼€å‘ | å…ˆå®Œæˆï¼Œå†å®Œç¾ï¼âœ¨</p>
                </div>
            </div>
            <h2 class="section-title">ğŸŒ¸ å¼€å¯ä½ çš„ä¸“æ³¨é­”æ³•</h2>
            <div class="tech-grid" id="home-tech-grid"></div>
            <h2 class="section-title">âœ¨ é­”æ³•å­¦ä¹ ç¬é—´</h2>
            <div class="gallery">
                <script>for (let i = 1; i <= 42; i++) { document.write(`<div class="gallery-item"><img src="./å›¾ç‰‡/${i}.jpg"></div>`); }</script>
            </div>
        </div>
        <footer>
            <p>Â© 2024 Hannie's Tech Journey | "Keep sparkling and keep learning!" </p>
        </footer>
    </div>

    <div id="focus-page">
        <div class="focus-header">
            <span>Hannie's Focus Hub</span>
            <button onclick="closeFocus()"
                style="background:none; border:none; color:white; cursor:pointer; font-size:1.5rem;">Ã—</button>
        </div>

        <div class="focus-layout">
            <div class="glass-card-timer">
                <div class="timer-circle"><img src="./å›¾ç‰‡/å¤´åƒ.png"></div>
                <div id="timer-display" onclick="setCustomTime()">25:00</div>
                <p id="focus-tip" style="font-size:0.85rem; color:var(--pony-pink); margin-top:15px;">ä¸“æ³¨è¿›è¡Œä¸­ï¼ŒåŠ æ²¹å“¦ï¼â¤ï¸</p>
                <small style="color:#999; margin-top:5px;">ç‚¹å‡»æ•°å­—ä¿®æ”¹æ—¶é•¿</small>
            </div>

            <div class="center-column">
                <div class="sector-btns-box" id="sector-btns"></div>
                <div class="pie-container">
                    <h4 style="margin:0 0 10px 0; font-size:0.9rem; text-align:center; color:var(--pony-pink)">æ¿å—åˆ†å¸ƒ (Xh
                        Xm)</h4>
                    <div style="flex-grow:1; position:relative;">
                        <canvas id="pieChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="data-area">
                <div class="action-area">
                    <button id="toggle-btn" class="btn-main" onclick="toggleTimer()">START FOCUS</button>
                    <button class="btn-link" onclick="openLink()">ğŸš€ æ‰“å¼€é£ä¹¦èµ„æ–™</button>
                </div>

                <div class="stat-card-row">
                    <div class="small-stat">
                        <h4>ä»Šæ—¥ç´¯è®¡</h4>
                        <p id="stat-today">0h 0m</p>
                    </div>
                    <div class="small-stat">
                        <h4>å‘¨æ€»è®¡</h4>
                        <p id="stat-week">0h 0m</p>
                    </div>
                </div>

                <div class="line-chart-box">
                    <h4 style="margin:0 0 10px 0; font-size:0.85rem">æ¯å‘¨å­¦ä¹ è¶‹åŠ¿ (0-12H)</h4>
                    <div style="flex-grow:1; position:relative;">
                        <canvas id="lineChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const TECH_CONFIG = {
            'HTML': { color: '#ffadad', link: 'https://my.feishu.cn/wiki/KK1ywC376ikQ35kpvXjcL0oIn5g' },
            'CSS': { color: '#ffd6a5', link: 'https://my.feishu.cn/wiki/HttEweqgEiwa5AkJqGQcgVZlnKg' },
            'JavaScript': { color: '#fdffb6', link: 'https://my.feishu.cn/wiki/CYxkwCpc3ikHVuk8HGIcLGcwnnh' },
            'å·¥ç¨‹åŒ–': { color: '#caffbf', link: 'https://my.feishu.cn/wiki/CYxkwCpc3ikHVuk8HGIcLGcwnnh' },
            'Vue': { color: '#9bf6ff', link: 'https://my.feishu.cn/wiki/Y8bZwrXB6ia4HakBtDSczoMfn8e' },
            'React': { color: '#a0c4ff', link: 'https://my.feishu.cn/wiki/Y8bZwrXB6ia4HakBtDSczoMfn8e' },
            'å…«è‚¡': { color: '#bdb2ff', link: 'https://my.feishu.cn/wiki/CYxkwCpc3ikHVuk8HGIcLGcwnnh' }
        };

        let appData = JSON.parse(localStorage.getItem('hannie_v6_data')) || {
            techMinutes: { 'HTML': 0, 'CSS': 0, 'JavaScript': 0, 'å·¥ç¨‹åŒ–': 0, 'Vue': 0, 'React': 0, 'å…«è‚¡': 0 },
            dailyLog: {}
        };

        let timeLeft = 25 * 60;
        let timerId = null;
        let isRunning = false;
        let currentTech = 'HTML';
        let pieChart, lineChart;

        function initButtons() {
            const grid = document.getElementById('home-tech-grid');
            const box = document.getElementById('sector-btns');
            Object.keys(TECH_CONFIG).forEach(tech => {
                grid.innerHTML += `<div class="tech-card" onclick="openFocus('${tech}')"><h3>${tech}</h3><span class="badge" id="b-${tech}">${appData.techMinutes[tech] || 0}m</span></div>`;
                box.innerHTML += `<button class="sector-btn" id="btn-${tech}" onclick="switchTech('${tech}')" style="background:${TECH_CONFIG[tech].color}; color:${['JavaScript', 'å·¥ç¨‹åŒ–'].includes(tech) ? '#666' : '#fff'}">${tech}</button>`;
            });
            box.innerHTML += `<p style="font-size:0.8rem; text-align:center; margin:5px 0 0 0">å½“å‰é€‰ä¸­: <b id="current-label" style="color:var(--pony-pink)">HTML</b></p>`;
        }

        // ä¿®æ”¹æ ¼å¼åŒ–å‡½æ•°ï¼Œé€‚é…é¥¼å›¾æ˜¾ç¤º Xh Xm
        function formatHM(totalMin) { return `${Math.floor(totalMin / 60)}h ${totalMin % 60}m`; }

        function toggleTimer() {
            if (!isRunning) {
                isRunning = true;
                document.getElementById('toggle-btn').innerText = "PAUSE FOCUS";
                document.getElementById('toggle-btn').classList.add('running');
                timerId = setInterval(tick, 1000);
            } else {
                pauseTimer();
            }
        }

        function pauseTimer() {
            isRunning = false;
            clearInterval(timerId);
            document.getElementById('toggle-btn').innerText = "RESUME FOCUS";
            document.getElementById('toggle-btn').classList.remove('running');
        }

        function tick() {
            if (timeLeft > 0) {
                timeLeft--; renderTimer();
                if (timeLeft % 60 === 0) {
                    const today = new Date().toISOString().split('T')[0];
                    appData.techMinutes[currentTech]++;
                    appData.dailyLog[today] = (appData.dailyLog[today] || 0) + 1;
                    localStorage.setItem('hannie_v6_data', JSON.stringify(appData));
                    updateUI();
                }
            } else {
                pauseTimer(); alert("ç•ªèŒ„å®Œæˆï¼å¤ªæ£’äº†~ âœ¨");
            }
        }

        function updateUI() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('stat-today').innerText = formatHM(appData.dailyLog[today] || 0);
            let weekTotal = 0; const weekHours = [];
            for (let i = 6; i >= 0; i--) {
                const d = new Date(); d.setDate(d.getDate() - i);
                const ds = d.toISOString().split('T')[0];
                const min = appData.dailyLog[ds] || 0;
                weekTotal += min; weekHours.push((min / 60).toFixed(1));
            }
            document.getElementById('stat-week').innerText = formatHM(weekTotal);
            Object.keys(TECH_CONFIG).forEach(t => { if (document.getElementById('b-' + t)) document.getElementById('b-' + t).innerText = (appData.techMinutes[t] || 0) + 'm'; });
            if (pieChart) { pieChart.data.datasets[0].data = Object.values(appData.techMinutes); pieChart.update(); }
            if (lineChart) { lineChart.data.datasets[0].data = weekHours; lineChart.update(); }
        }

        function initCharts() {
            const ctxP = document.getElementById('pieChart').getContext('2d');
            pieChart = new Chart(ctxP, {
                type: 'pie',
                data: {
                    labels: Object.keys(TECH_CONFIG),
                    datasets: [{
                        data: Object.values(appData.techMinutes),
                        backgroundColor: Object.values(TECH_CONFIG).map(t => t.color),
                        borderWidth: 2, borderColor: '#fff'
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { boxWidth: 10, font: { size: 10 } } },
                        tooltip: {
                            callbacks: {
                                label: (context) => ` ${context.label}: ${formatHM(context.raw)}`
                            }
                        }
                    }
                }
            });

            const ctxL = document.getElementById('lineChart').getContext('2d');
            lineChart = new Chart(ctxL, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        data: [0, 0, 0, 0, 0, 0, 0],
                        borderColor: '#ff69b4',
                        backgroundColor: 'rgba(255,105,180,0.1)',
                        fill: true, tension: 0.4
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, max: 12 } },
                    plugins: { legend: { display: false } }
                }
            });
        }

        function renderTimer() {
            const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
            const s = (timeLeft % 60).toString().padStart(2, '0');
            document.getElementById('timer-display').innerText = `${m}:${s}`;
        }

        function setCustomTime() {
            pauseTimer();
            const min = prompt("è®¾å®šä¸“æ³¨åˆ†é’Ÿæ•°:", "25");
            if (min && !isNaN(min)) { timeLeft = min * 60; renderTimer(); }
        }

        function switchTech(tech) {
            currentTech = tech;
            document.getElementById('current-label').innerText = tech;
            document.querySelectorAll('.sector-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-' + tech).classList.add('active');
        }

        function openLink() { window.open(TECH_CONFIG[currentTech].link, '_blank'); }

        function openFocus(tech) {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('focus-page').style.display = 'block';
            switchTech(tech);
            if (!pieChart) initCharts();
            updateUI();
        }

        function closeFocus() {
            pauseTimer();
            document.getElementById('focus-page').style.display = 'none';
            document.getElementById('home-page').style.display = 'block';
            updateUI();
        }

        initButtons();
        updateUI();
    </script>
</body>

</html>